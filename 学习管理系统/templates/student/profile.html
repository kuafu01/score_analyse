<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>个人档案</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
        body { background: #f8f9fa; }
        .sidebar { min-height: 100vh; background: #fff; border-right: 1px solid #dee2e6; }
        .sidebar .nav-link.active { background: #007bff; color: #fff !important; }
        .content-area { padding: 2rem; }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        {% include 'student/_sidebar.html' %}
        <main class="col-md-10 ml-sm-auto content-area">
            <form method="post" action="/student/profile/edit" id="profileForm">
                <div class="form-group">
                    <label>姓名</label>
                    <input type="text" class="form-control" name="name" value="{{ info.name }}" readonly>
                </div>
                <div class="form-group">
                    <label>性别</label>
                    <input type="text" class="form-control" name="gender" value="{{ info.gender }}" readonly>
                </div>
                <div class="form-group">
                    <label>出生日期</label>
                    <input type="date" class="form-control" name="birth_date" value="{{ info.birth_date }}" readonly>
                </div>
                <div class="form-group">
                    <label>班级</label>
                    <input type="text" class="form-control" name="class_name" value="{{ info.class_name }}" readonly>
                </div>
                <div class="form-group">
                    <label>联系电话</label>
                    <input type="text" class="form-control" name="contact_phone" value="{{ info.contact_phone }}" readonly>
                </div>
                <div class="form-group">
                    <label>紧急联系人</label>
                    <input type="text" class="form-control" name="emergency_contact" value="{{ info.emergency_contact }}" readonly>
                </div>
                <button type="button" class="btn btn-primary float-right" id="editBtn">编辑个人档案</button>
                <button type="submit" class="btn btn-success float-right mr-2 d-none" id="saveBtn">保存</button>
                <button type="button" class="btn btn-secondary float-right mr-2 d-none" id="cancelBtn">取消</button>
            </form>
            <script>
                const editBtn = document.getElementById('editBtn');
                const saveBtn = document.getElementById('saveBtn');
                const cancelBtn = document.getElementById('cancelBtn');
                const form = document.getElementById('profileForm');
                const inputs = form.querySelectorAll('input');
                editBtn.onclick = function() {
                    inputs.forEach(i => i.readOnly = false);
                    editBtn.classList.add('d-none');
                    saveBtn.classList.remove('d-none');
                    cancelBtn.classList.remove('d-none');
                };
                cancelBtn.onclick = function() {
                    window.location.reload();
                };
            </script>
        </main>
    </div>
</div>
</body>
</html>
