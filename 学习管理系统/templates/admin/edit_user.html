{% extends "base.html" %}
{% block title %}编辑用户 - 学习管理系统{% endblock %}
{% block content %}
<div class="content-header">
    <h2><i class="fas fa-edit"></i> 编辑用户</h2>
</div>
<div class="content-body">
    <form method="post" style="max-width:600px;margin:0 auto;">
    {% if user_type == 'student' and user %}
        <div class="card">
            <div class="card-header bg-primary text-white"><i class="fas fa-user-graduate"></i> 学生信息</div>
            <div class="card-body">
                <div class="form-group"><label>学号</label><input type="text" class="form-control" name="student_id" value="{{ user.student_id }}" readonly></div>
                <div class="form-group"><label>姓名</label><input type="text" class="form-control" name="name" value="{{ user.name }}"></div>
                <div class="form-group"><label>性别</label><input type="text" class="form-control" name="gender" value="{{ user.gender }}"></div>
                <div class="form-group"><label>联系电话</label><input type="text" class="form-control" name="contact_phone" value="{{ user.contact_phone }}"></div>
            </div>
            <div class="card-footer text-center bg-light">
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="new_password">新密码（可选）</label>
                    <input type="password" class="form-control" id="new_password" name="new_password" minlength="4" maxlength="32" placeholder="如需重置请输入新密码">
                </div>
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="confirm_password">确认新密码</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" minlength="4" maxlength="32" placeholder="请再次输入新密码">
                </div>
                <button type="submit" class="btn btn-primary">保存</button>
                <a href="{{ url_for('admin_manage_users') }}" class="btn btn-secondary">返回</a>
            </div>
        </div>
    {% elif user_type == 'teacher' and user %}
        <div class="card">
            <div class="card-header bg-success text-white"><i class="fas fa-chalkboard-teacher"></i> 教师信息</div>
            <div class="card-body">
                <div class="form-group"><label>工号</label><input type="text" class="form-control" name="teacher_id" value="{{ user.teacher_id }}" readonly></div>
                <div class="form-group"><label>姓名</label><input type="text" class="form-control" name="name" value="{{ user.name }}"></div>
                <div class="form-group"><label>职称</label><input type="text" class="form-control" name="title" value="{{ user.title }}"></div>
                <div class="form-group"><label>联系电话</label><input type="text" class="form-control" name="phone" value="{{ user.phone }}"></div>
            </div>
            <div class="card-footer text-center bg-light">
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="new_password">新密码（可选）</label>
                    <input type="password" class="form-control" id="new_password" name="new_password" minlength="4" maxlength="32" placeholder="如需重置请输入新密码">
                </div>
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="confirm_password">确认新密码</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" minlength="4" maxlength="32" placeholder="请再次输入新密码">
                </div>
                <button type="submit" class="btn btn-primary">保存</button>
                <a href="{{ url_for('admin_manage_users') }}" class="btn btn-secondary">返回</a>
            </div>
        </div>
    {% elif user_type == 'admin' and user %}
        <div class="card">
            <div class="card-header bg-warning text-dark"><i class="fas fa-user-cog"></i> 管理员信息</div>
            <div class="card-body">
                <div class="form-group"><label>编号</label><input type="text" class="form-control" name="cno" value="{{ user.cno }}" readonly></div>
                <div class="form-group"><label>姓名</label><input type="text" class="form-control" name="cname" value="{{ user.cname }}"></div>
            </div>
            <div class="card-footer text-center bg-light">
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="new_password">新密码（可选）</label>
                    <input type="password" class="form-control" id="new_password" name="new_password" minlength="4" maxlength="32" placeholder="如需重置请输入新密码">
                </div>
                <div class="form-group" style="max-width:320px;margin:0 auto 16px auto;">
                    <label for="confirm_password">确认新密码</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" minlength="4" maxlength="32" placeholder="请再次输入新密码">
                </div>
                <button type="submit" class="btn btn-primary">保存</button>
                <a href="{{ url_for('admin_manage_users') }}" class="btn btn-secondary">返回</a>
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning m-4">未找到用户信息</div>
    {% endif %}
    </form>
</div>
{% endblock %}
